# guide.md — Official sources & snippets for the vector DB stack

A quick map to the **official docs/downloads** for the three backends (**Milvus**, **Elasticsearch**, **Chroma**), plus exact commands and compose snippets. Chroma is standardized here to **port 8000**.

---

## Milvus (Standalone)

* **Docs (official):** [https://milvus.io/docs/install_standalone-docker-compose.md](https://milvus.io/docs/install_standalone-docker-compose.md)
* **Release compose (v2.6.2):**
  `https://github.com/milvus-io/milvus/releases/download/v2.6.2/milvus-standalone-docker-compose.yml`

**Pull via CLI**

```bash
# Linux/macOS
wget https://github.com/milvus-io/milvus/releases/download/v2.6.2/milvus-standalone-docker-compose.yml -O docker-compose.yml
docker compose up -d
```

```powershell
# Windows PowerShell
Invoke-WebRequest `
  -Uri https://github.com/milvus-io/milvus/releases/download/v2.6.2/milvus-standalone-docker-compose.yml `
  -OutFile docker-compose.yml
docker compose up -d
```

**Image tag note**: Milvus uses a leading `v` (e.g., `milvusdb/milvus:v2.6.2`).
**Health checks**: container HTTP `http://localhost:9091/healthz` and gRPC on `19530`.

---

## Elasticsearch (Single-node dev)

* **Docs (official):** [https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html)
* **Image:** `docker.elastic.co/elasticsearch/elasticsearch:<version>` (e.g., `8.13.4`)

**Minimal single-node compose (dev)**

```yaml
services:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.13.4
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false   # dev only
      - ES_JAVA_OPTS=-Xms1g -Xmx1g
    ports:
      - "9200:9200"
```

**Health check**: `curl http://localhost:9200` (JSON cluster info).

---

## Chroma (Server mode @ 8000)

* **Docs (official):** [https://docs.trychroma.com/](https://docs.trychroma.com/)
* **Container image:** `ghcr.io/chroma-core/chroma` (pin a tag for stability, e.g., `0.5.5`)

**Standard compose (host 8000 → container 8000)**

```yaml
services:
  chroma:
    image: ghcr.io/chroma-core/chroma:0.5.5
    environment:
      - CHROMA_SERVER_HOST=0.0.0.0
      - CHROMA_SERVER_HTTP_PORT=8000
      - ANONYMIZED_TELEMETRY=False
    ports:
      - "8000:8000"
    volumes:
      - chroma-data:/data   # image’s default persist path is /data
```

**Health check**: `GET http://localhost:8000/api/v2/heartbeat`

---

## Using them together

If you want **one file** that brings up all three:

* Start from `tests/cpu/docker-compose.yml` (combined stack using Milvus’s official layout for `etcd`, `minio`, `standalone`) and add the Chroma + Elasticsearch services as above.
* Keep ports aligned with your app’s env:

  * `CHROMA_PORT=8000`
  * `ES_URL=http://127.0.0.1:9200`
  * `MILVUS_PORT=19530`

---
